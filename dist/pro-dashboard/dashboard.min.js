(globalThis.itsecWebpackJsonP=globalThis.itsecWebpackJsonP||[]).push([[3227],{33590:(e,t,r)=>{"use strict";r.d(t,{bB:()=>V,ZP:()=>Q});var a={};r.r(a),r.d(a,{BaseInput:()=>d,CheckboxWidget:()=>p,CheckboxesWidget:()=>h,IncludeExcludeWidget:()=>S,RadioWidget:()=>N,SelectWidget:()=>x,TextareaWidget:()=>_,ToggleWidget:()=>m});var n={};r.r(n),r.d(n,{EntitySelectField:()=>M,FileTreeField:()=>H,TextareaListField:()=>P,TitleField:()=>Z});var l=r(92819),s=r(87462),i=r(6293),o=r(64893),c=r(36179);const d=function(e){const{id:t,label:r,value:a,readonly:n,disabled:d,onBlur:u,onFocus:m,options:p,onChange:h,schema:g,uiSchema:b={},...f}=e;p.inputType?f.type=p.inputType:f.type||("number"===g.type?(f.type="number",f.step="any"):"integer"===g.type?(f.type="number",f.step="1"):f.type="text"),p.autocomplete&&(f.autoComplete=p.autocomplete),g.multipleOf&&(f.step=g.multipleOf),void 0!==g.minimum&&(f.min=g.minimum),void 0!==g.maximum&&(f.max=g.maximum);const y=b["ui:description"]||g.description;return(0,i.createElement)(o.TextControl,(0,s.Z)({label:r,help:(0,i.createElement)(c.Lu,{noWrap:!0,content:y}),readOnly:n,disabled:d,value:a||""},(0,l.omit)(f,["autofocus","formContext","registry","rawErrors"]),{onChange:e=>h(""===e?p.emptyValue:e),onBlur:u&&(e=>u(f.id,e.target.value)),onFocus:m&&(e=>m(f.id,e.target.value))}))};var u=r(54639);function m({schema:e,uiSchema:t={},id:r,value:a,disabled:n,readonly:l,label:s,onBlur:d,onFocus:m,onChange:p}){const h=u.P6.schemaRequiresTrueValue(e),g=t["ui:description"]||e.description;return(0,i.createElement)(o.ToggleControl,{checked:a||!1,onChange:p,required:h,disabled:n,readOnly:l,label:s,help:(0,i.createElement)(c.Lu,{noWrap:!0,content:g}),onBlur:d&&(e=>d(r,e.target.checked)),onFocus:m&&(e=>m(r,e.target.checked))})}function p({schema:e,uiSchema:t={},id:r,value:a,disabled:n,readonly:l,label:s,onBlur:d,onFocus:m,onChange:p}){const h=u.P6.schemaRequiresTrueValue(e),g=t["ui:description"]||e.description;return(0,i.createElement)(o.CheckboxControl,{checked:a||!1,onChange:p,required:h,disabled:n,readOnly:l,label:s,help:(0,i.createElement)(c.Lu,{noWrap:!0,content:g}),onBlur:d&&(e=>d(r,e.target.checked)),onFocus:m&&(e=>m(r,e.target.checked))})}function h(e){const{disabled:t,options:r,value:a,readonly:n,onChange:l,label:s,schema:o,uiSchema:d={}}=e,{enumOptions:u,enumDisabled:m=[],enumDescriptions:p=[],style:h}=r,g=d["ui:description"]||o.description,b=u.map(((e,t)=>({...e,disabled:m.includes(e.value),help:p[t]&&(0,i.createElement)(c.Lu,{noWrap:!0,content:p[t]})})));return(0,i.createElement)(c.w2,{value:a||[],onChange:l,options:b,label:s||d["ui:title"]||o.title,help:(0,i.createElement)(c.Lu,{noWrap:!0,content:g}),readOnly:n,disabled:t,style:h})}const{asNumber:g,guessType:b}=u.P6,f=new Set(["number","integer"]);function y(e,t){const{type:r,items:a}=e;if(""!==t){if("array"===r&&a&&f.has(a.type))return t.map(g);if("boolean"===r)return"true"===t;if("number"===r)return g(t);if(e.enum){if(e.enum.every((e=>"number"===b(e))))return g(t);if(e.enum.every((e=>"boolean"===b(e))))return"true"===t}return t}}function E(e,t){return t?[].slice.call(e.target.options).filter((e=>e.selected)).map((e=>e.value)):e.target.value}const x=function(e){const{schema:t,uiSchema:r={},id:a,options:n,value:l,label:s,required:d,disabled:u,readonly:m,multiple:p,onChange:h,onBlur:g,onFocus:b,placeholder:f}=e,{enumOptions:x,enumDisabled:v}=n,_=p?[]:"",C=[];p||void 0!==t.default||C.push({value:"",label:f});for(const e of x)C.push({...e,disabled:v&&v.includes(e.value)});const w=r["ui:description"]||t.description;return(0,i.createElement)(o.SelectControl,{multiple:p,options:C,value:void 0===l?_:l,label:s,help:(0,i.createElement)(c.Lu,{noWrap:!0,content:w}),required:d,disabled:u,readOnly:m,onChange:e=>h(y(t,e)),onBlur:g&&(e=>g(a,y(t,E(e,p)))),onFocus:b&&(e=>b(a,y(t,E(e,p))))})},{getUiOptions:v}=u.P6;function _({schema:e,uiSchema:t={},id:r,value:a,disabled:n,readonly:d,label:u,onBlur:m,onFocus:p,onChange:h,...g}){const b=v(t),{rows:f,placeholder:y,description:E=e.description}=b;return(0,i.createElement)(o.TextareaControl,(0,s.Z)({value:void 0===a?"":a,onChange:h,disabled:n,readOnly:d,label:u,help:(0,i.createElement)(c.Lu,{noWrap:!0,content:E}),onBlur:m&&(e=>m(r,e.target.value)),onFocus:p&&(e=>p(r,e.target.value)),rows:f,placeholder:y},(0,l.without)(g,["autofocus","formContext","registry","rawErrors"])))}const{asNumber:C,guessType:w}=u.P6,I=new Set(["number","integer"]);function k(e,t){const{type:r,items:a}=e;if(""!==t){if("array"===r&&a&&I.has(a.type))return t.map(C);if("boolean"===r)return"true"===t;if("number"===r)return C(t);if(e.enum){if(e.enum.every((e=>"number"===w(e))))return C(t);if(e.enum.every((e=>"boolean"===w(e))))return"true"===t}return t}}function N({schema:e,uiSchema:t={},id:r,options:a,value:n,label:l,required:s,disabled:d,readonly:u,onChange:m,onBlur:p,onFocus:h}){const{enumOptions:g}=a,b=t["ui:description"]||e.description;return(0,i.createElement)(o.RadioControl,{selected:n,options:g,label:l,help:(0,i.createElement)(c.Lu,{noWrap:!0,content:b}),required:s,disabled:d,readOnly:u,onChange:t=>m(k(e,t)),onBlur:p&&(t=>p(r,k(e,t.target.value))),onFocus:h&&(t=>h(r,k(e,t.target.value)))})}var L=r(95122),O=r(82839),D=r(81019);function S({id:e,disabled:t,options:r,value:a,onChange:n,schema:s,autofocus:c,readonly:d}){const{enumOptions:u,enumDisabled:m=[],excludeList:{title:p=(0,L.__)("Excluded","it-l10n-ithemes-security-pro"),description:h=(0,L.__)("The list of items to exclude from the selection.","it-l10n-ithemes-security-pro"),button:g=(0,L.__)("Include","it-l10n-ithemes-security-pro")}={},includeList:{title:b=(0,L.__)("Included","it-l10n-ithemes-security-pro"),description:f=(0,L.__)("The list of items to include in the selection.","it-l10n-ithemes-security-pro"),button:y=(0,L.__)("Exclude","it-l10n-ithemes-security-pro")}={},title:E=s.title,description:x=s.description}=r;(0,i.useEffect)((()=>{const e=u.map((e=>e.value)),t=a.filter((t=>e.includes(t)));t.length!==a.length&&n(t)}),[a,u,n]);const[v,_]=(0,l.partition)(u,(e=>!a.includes(e.value)));return(0,i.createElement)("div",{className:"itsec-rjsf-include-exclude-widget"},E&&(0,i.createElement)(o.BaseControl.VisualLabel,null,E),x&&(0,i.createElement)("p",null,x),(0,i.createElement)("div",{className:"itsec-rjsf-include-exclude-widget__sides",id:e},(0,i.createElement)(T,{id:e+"__exclude",options:v,label:p,description:h,button:g,disabled:t||d,disabledOptions:m,autofocus:c,onToggle:e=>{(0,O.speak)((0,L.sprintf)((0,L.__)("Moved %1$s to %2$s.","it-l10n-ithemes-security-pro"),(0,l.find)(v,{value:e}).label,b)),n([...a,e])}}),(0,i.createElement)(T,{id:e+"__include",options:_,label:b,description:f,button:y,disabled:t||d,disabledOptions:m,onToggle:e=>{(0,O.speak)((0,L.sprintf)((0,L.__)("Moved %1$s to %2$s.","it-l10n-ithemes-security-pro"),(0,l.find)(_,{value:e}).label,p)),n(a.filter((t=>t!==e)))}})))}function T({id:e,label:t,description:r,options:a,button:n,onToggle:s,disabled:d,disabledOptions:u=[],autofocus:m}){const p=e+"__option__",[h,g]=(0,i.useState)("");return h&&!(0,l.find)(a,{value:h})&&g(""),(0,i.createElement)("div",{className:"itsec-rjsf-include-exclude-widget__side"},(0,i.createElement)(o.BaseControl,{id:e,help:(0,i.createElement)(c.Lu,{noWrap:!0,content:r}),className:"itsec-rjsf-include-exclude-widget__listbox"},(0,i.createElement)("span",{className:"components-base-control__label",id:e+"__label"},t),(0,i.createElement)(c.T2,{role:"listbox",id:e,active:h&&p+h,"aria-labelledby":e+"__label","aria-describedby":r&&e+"__help",onNavigate:e=>g(e.substr(p.length)),onKeyDown:({keyCode:e})=>{if(!h||e!==D.DELETE&&e!==D.BACKSPACE)return;const t=(0,l.findIndex)(a,{value:h}),r=t+1<a.length?t+1:t-1;s(h),g(a[r]?.value||"")},autoFocus:m},a.map((e=>(0,i.createElement)("div",{id:p+e.value,key:e.value,role:d||u.includes(e.value)?"presentation":"option","aria-selected":e.value===h||void 0,onClick:d||u.includes(e.value)?void 0:()=>g(e.value)},e.label))))),(0,i.createElement)(o.Button,{variant:"secondary",disabled:!h,className:"itsec-rjsf-include-exclude-widget__move",onClick:()=>s(h),"aria-keyshortcuts":"Delete Backspace"},n))}const j="*";function Z(e){const{id:t,title:r,required:a}=e;return(0,i.createElement)("span",{className:"itsec-rjsf-title-field",id:t},r,a&&(0,i.createElement)("span",{className:"required"},j))}var A=r(1986);const{getUiOptions:F}=u.P6;function M({uiSchema:e,schema:t,idSchema:r,name:a,formData:n,disabled:l,readonly:s,onChange:o}){const c=F(e);return(0,i.createElement)(A.fv,{id:r.$id,value:n,disabled:l,readonly:s,onChange:o,isMultiple:"array"===t.type,label:e["ui:title"]||t.title||a,description:e["ui:description"]||t.description,path:c.path,query:c.query,labelAttr:c.labelAttr,idAttr:c.idAttr,searchArg:c.searchArg})}const{getUiOptions:z}=u.P6;function P({uiSchema:e,schema:t,name:r,formData:a,disabled:n,readonly:l,onChange:s}){const o=e["ui:title"]||t.title||r,d=e["ui:description"]||t.description,u=z(e),{rows:m,placeholder:p}=u;return(0,i.createElement)(c.yA,{label:o,help:(0,i.createElement)(c.Lu,{noWrap:!0,content:d}),disabled:n,readonly:l,rows:m,value:a,onChange:s,placeholder:p})}var B=r(87514),R=r.n(B),U=r(73470);function H({idSchema:e,formData:t,onChange:r,uiSchema:a,schema:n,name:s,disabled:d,readonly:u,autofocus:m}){const p=e.$id,h=a["ui:title"]||n.title||s,g=a["ui:description"]||n.description,[b,f]=(0,i.useState)([]),[y,E]=(0,i.useState)("");(0,i.useEffect)((()=>{R()({path:(0,U.addQueryArgs)("/ithemes-security/rpc/file-change/file-tree",{directory:"/"})}).then(f)}),[]);const x=e=>{r(t.includes(e)?t.filter((t=>t!==e)):[...t,e])};return(0,i.createElement)("div",{className:"itsec-rjsf-file-tree"},g&&(0,i.createElement)(c.Lu,{content:g,tagName:"p"}),(0,i.createElement)("div",{className:"itsec-rjsf-file-tree__controls"},(0,i.createElement)("div",null,(0,i.createElement)(c.mp,{tree:b,id:p,label:(0,L.__)("File Selector","it-l10n-ithemes-security-pro"),active:y,setActive:E,onActivate:x,onLoad:async e=>{const t=await R()({path:(0,U.addQueryArgs)("/ithemes-security/rpc/file-change/file-tree",{directory:e})}),r=(0,l.cloneDeep)(b);(0,c.in)(r,(r=>{if(r.id===e)return r.children=t,c.in.halt})),f(r)}}),(0,i.createElement)(o.Button,{variant:"secondary",disabled:!y,className:"itsec-rjsf-file-tree__select",onClick:()=>x(y),"aria-keyshortcuts":"Enter Space"},(0,L.__)("Select","it-l10n-ithemes-security-pro"))),(0,i.createElement)(c.yA,{value:t,onChange:r,className:"itsec-rjsf-file-tree__list",label:h,disabled:d,readonly:u,autoFocus:m})))}function V({name:e,...t}){return(0,i.createElement)(o.Fill,(0,s.Z)({name:`RjsfField${e}`},t))}function q({name:e,...t}){return(0,i.createElement)(o.Slot,(0,s.Z)({name:`RjsfField${e}`},t))}const{ADDITIONAL_PROPERTY_FLAG:W,getUiOptions:K}=u.P6;function $(e){const{id:t,classNames:r,disabled:a,label:n,onKeyChange:l,onDropPropertyClick:s,readonly:c,required:d,schema:u,uiSchema:m}=e,p=`${n} Key`,h=u.hasOwnProperty(W),{removable:g}=K(m);return h&&!1!==g?(0,i.createElement)("div",{className:r},(0,i.createElement)("div",{className:"row"},(0,i.createElement)("div",{className:"col-xs-5 form-additional"},(0,i.createElement)(o.TextControl,{label:p,required:d,id:`${t}-key`,onBlur:e=>l(e.target.value)})),(0,i.createElement)("div",{className:"form-additional form-group col-xs-5"},e.children),(0,i.createElement)("div",{className:"col-xs-2"},(0,i.createElement)(o.Button,{icon:"no-alt",isDestructive:!0,disabled:a||c,onClick:s(n)})))):(0,i.createElement)("div",{className:r},e.children)}const{canExpand:Y}=u.P6;function G({className:e,onClick:t,disabled:r}){return(0,i.createElement)("div",{className:"row"},(0,i.createElement)("p",{className:`col-xs-3 col-xs-offset-9 text-right ${e}`},(0,i.createElement)(o.Button,{icon:"plus-alt2",className:"btn-add col-xs-12","aria-label":(0,L.__)("Add","it-l10n-ithemes-security-pro"),tabIndex:"0",onClick:t,disabled:r})))}const X={FieldTemplate:function(e){const{children:t,errors:r,hidden:a,schema:n,uiSchema:l,formContext:s,onChange:c}=e;if(a)return null;const{resettable:d}=K(l);return(0,i.createElement)($,e,t,(0,i.createElement)(q,{name:e.id,fillProps:e}),d&&(0,i.createElement)(o.Button,{className:"itsec-rjsf-reset-field",variant:"secondary",onClick:()=>c(n.default)},(0,L.__)("Restore Default","it-l10n-ithemes-security-pro")),!0!==s?.disableInlineErrors&&r)},ObjectFieldTemplate:function(e){const{TitleField:t,DescriptionField:r,schema:a,uiSchema:n,properties:l}=e;if(!l.length)return null;const s=(n["ui:sections"]||[]).reduce(((e,t)=>({...e,[t.fields.find((e=>!!a.properties[e]))]:t})),{});return(0,i.createElement)("div",{className:"itsec-rjsf-object-fieldset",id:e.idSchema.$id},(n["ui:title"]||e.title)&&(0,i.createElement)(t,{id:`${e.idSchema.$id}__title`,title:e.title||n["ui:title"],required:e.required,formContext:e.formContext}),e.description&&(0,i.createElement)(r,{id:`${e.idSchema.$id}__description`,description:(0,i.createElement)(c.Lu,{noWrap:!0,content:e.description}),formContext:e.formContext}),l.map((({name:e,content:t})=>s[e]?(0,i.createElement)(i.Fragment,{key:e},(0,i.createElement)("h3",{className:"itsec-rjsf-section-title"},s[e].title),s[e].description&&(0,i.createElement)("p",{className:"itsec-rjsf-section-description"},(0,i.createElement)(c.Lu,{noWrap:!0,content:s[e].description})),t):t)),Y(a,n,e.formData)&&(0,i.createElement)(G,{className:"object-property-expand",onClick:e.onAddClick(a),disabled:e.disabled||e.readonly}))},ErrorList:function({errors:e}){return(0,i.createElement)(c.KM,{errors:e.map((({stack:e}={})=>e)).filter((e=>!!e))})},widgets:a,fields:n},Q=X},1986:(e,t,r)=>{"use strict";r.d(t,{U9:()=>De,qb:()=>V,a7:()=>q,kS:()=>Ce,fv:()=>m,KM:()=>g,Xp:()=>y,nU:()=>oe,TR:()=>pe,Lu:()=>_,uC:()=>se,T:()=>O,b:()=>D,qd:()=>we,Ph:()=>H,_g:()=>le,ge:()=>J,Qf:()=>ee,oB:()=>Se});var a=r(6293),n=r(62845),l=r(92819),s=r(87514),i=r.n(s),o=r(73470),c=r(64893),d=r(9576);const{useGlobalState:u}=(0,n.r8)({cache:{}});function m({id:e,value:t,disabled:r,readonly:n,onChange:s,label:p,description:h,isMultiple:g=!1,path:b,query:f={},labelAttr:y,idAttr:E="id",searchArg:x="search"}){const[v,C]=u("cache"),w=(0,d.useInstanceId)(m,"itsec-entity-select-control");e=e||w;const[I,k]=(0,a.useState)(""),N=function(e,t,r,n,s,c,d){return(0,a.useCallback)((a=>i()({path:(0,o.addQueryArgs)(e,{...t,[s]:a})}).then((e=>e.map((e=>({value:e[n],label:e[r]}))))).then((t=>(d({...c,[e]:{...c[e]||{},...(0,l.mapValues)((0,l.keyBy)(t,"value"),"label")}}),t)))),[e,t,r,n,s,c,d])}(b,f,y,E,x,v,C);let L;return g?L=(t||[]).filter((e=>void 0!==e)).map((e=>({value:e,label:v[b]?.[e]||e}))):t&&(L={value:t,label:v[b]?.[t]||t}),(0,a.createElement)(c.BaseControl,{className:"itsec-entity-select-control",label:p,help:h&&(0,a.createElement)(_,{noWrap:!0,content:h}),id:e,__nextHasNoMarginBottom:!0},(0,a.createElement)(V,{"aria-label":p,"aria-describedby":h?e+"__help":void 0,classNamePrefix:"itsec-entity-select-control-as",inputId:e,isDisabled:r||n,isMulti:g,isClearable:!0,cacheOptions:!0,defaultOptions:!0,loadOptions:N,value:L,onChange:e=>s(g?(e||[]).map((e=>e.value)):e?.value),inputValue:I,onInputChange:k}))}var p=r(71930),h=r(31511);function g({errors:e,apiError:t,schemaError:r,title:n,className:l,hasBorder:s}){const i=[...e||[],...(0,h.Y3)(t),...(r||[]).map((e=>e.stack))];return i.length?(0,a.createElement)(p.rN,{messages:i,heading:n,className:l,hasBorder:s,type:"danger"}):null}var b=r(52117);const f=(0,b.Z)("div",{target:"eq12dkg0"})({name:"1ff36h2",styles:"flex-grow:1"});function y(){return(0,a.createElement)(f,{"aria-hidden":!0})}var E=r(87462),x=r(63108),v=r(73727);function _({transform:e,...t}){return(0,a.createElement)(x.Lu,(0,E.Z)({},t,{transform:(r,n)=>{if(e){const t=e(r,n);if(void 0!==t)return t}if("a"===r.tagName.toLowerCase()&&r.dataset.itsecPath&&!t.noHtml)return(0,a.createElement)(v.rU,{to:r.dataset.itsecPath},n)}}))}var C=r(95122),w=r(65813),I=r(54639),k=r(33590);const N=(0,I.Zz)(k.ZP),L=(0,b.Z)(N,{target:"exs7mtu0"})(".itsec-rjsf-object-fieldset{display:grid;grid-template-columns:[label fields] minmax(0, 1fr);grid-template-rows:auto;grid-gap:.5rem 0;@media (min-width: ",(({theme:{breaks:e}})=>e.small),"px){grid-template-columns:[label] 10rem [fields] minmax(0, 1fr);}}.itsec-rjsf-section-description{margin-top:0;grid-column:fields;}>.field-object>.itsec-rjsf-object-fieldset{&>.itsec-rjsf-title-field,&>.itsec-rjsf-section-title{grid-column:label;font-size:1rem;padding-right:1rem;margin-bottom:0;&:not(:first-child){border-top:1px solid ",(({theme:e})=>e.colors.border.normal),";margin-top:.5rem;padding-top:1rem;@media (min-width: ",(({theme:{breaks:e}})=>e.small),"px){&+*{border-top:1px solid ",(({theme:e})=>e.colors.border.normal),";margin-top:.5rem;padding-top:1rem;}}}}&>.form-group:not(.field-object){grid-column:label/fields-end;}&>.itsec-rjsf-section-title~.form-group{grid-column:fields;}&>.field-object{grid-column:label/fields-end;}&>.field-description{margin-top:0;}}.itsec-rjsf-object-fieldset>*>.itsec-rjsf-object-fieldset{&>.itsec-rjsf-title-field{grid-column:label;font-size:1rem;padding-right:1rem;}&>.form-group{grid-column:fields;}&>.field-description{grid-column:fields;margin-top:0;}}.components-base-control__label,.components-input-control__label,label,caption,legend{color:",(({theme:e})=>e.colors.text.dark),";}.itsec-highlighted-search-result{.components-base-control__label,.components-input-control__label,label,caption{border-bottom:3px solid ",(({theme:e})=>e.colors.border.info),";padding-bottom:3px;margin-bottom:6px;}.components-base-control__field{margin-bottom:12px;}}.field-object:not(:first-child):not(:empty){border-top:1px solid ",(({theme:e})=>e.colors.border.normal),";margin-top:1rem;padding-top:1rem;}.field-object:empty{display:none;}.itsec-rjsf-title-field+.field-object:not(:first-child),.itsec-rjsf-section-description+.field-object:not(:first-child){border-top:none;margin-top:0;padding-top:0;}");function O({saveLabel:e,isSaving:t,saveDisabled:r,cancelLabel:n,onCancel:l,cancelRoute:s,undoLabel:i,undoDisabled:o,onUndo:u,children:m,errors:p,apiError:h,schemaError:b,withCard:f,alignActions:y,...x}){let v=(0,d.useInstanceId)(O,"itsec-schema-form");v=x.id||v;const _=(0,a.createElement)(React.Fragment,null,(0,a.createElement)(g,{errors:p,apiError:h,schemaError:b}),(0,a.createElement)(D,(0,E.Z)({},x,{id:v})));return(0,a.createElement)(c.Flex,{direction:"column",gap:7,justify:"start",expanded:!1},(0,a.createElement)(c.FlexItem,null,f&&(0,a.createElement)(c.Card,null,(0,a.createElement)(c.CardBody,null,_)),!f&&_),(0,a.createElement)(c.FlexItem,null,(0,a.createElement)(S,{id:v,saveLabel:e,cancelLabel:n,isSaving:t,saveDisabled:r,onCancel:l,cancelRoute:s,undoLabel:i,undoDisabled:o,onUndo:u,align:y},m)))}function D({className:e,...t}){return(0,a.createElement)(L,(0,E.Z)({},t,{className:e,additionalMetaSchemas:[r(27171)]}),(0,a.createElement)(React.Fragment,null))}function S({id:e,saveLabel:t=(0,C.__)("Save","it-l10n-ithemes-security-pro"),isSaving:r,saveDisabled:n,cancelLabel:l=(0,C.__)("Cancel","it-l10n-ithemes-security-pro"),onCancel:s,cancelRoute:i,undoLabel:o=(0,C.__)("Undo Changes","it-l10n-ithemes-security-pro"),undoDisabled:d,onUndo:u,align:m,children:h}){return(0,a.createElement)(c.Flex,{align:m},s&&(0,a.createElement)(c.FlexItem,null,(0,a.createElement)(p.zx,{variant:"tertiary",type:"button",onClick:s},l)),i&&(0,a.createElement)(c.FlexItem,null,(0,a.createElement)(v.rU,{component:(0,w.Sj)(p.zx),variant:"tertiary",type:"button",to:i},l)),!m&&(0,a.createElement)(y,null),h,u&&(0,a.createElement)(c.FlexItem,null,(0,a.createElement)(p.zx,{variant:"secondary",disabled:d,onClick:u},o)),(0,a.createElement)(c.FlexItem,null,(0,a.createElement)(p.zx,{variant:"primary",isBusy:r,disabled:r||n,form:e,type:"submit"},t)))}var T=r(99196),j=r(35800),Z=r(12614),A=r(29508);const F=(0,T.lazy)((()=>Promise.all([r.e(4699),r.e(3157)]).then(r.bind(r,23157)))),M=(0,T.lazy)((()=>Promise.all([r.e(4699),r.e(4136)]).then(r.bind(r,64136)))),z=(0,T.lazy)((()=>Promise.all([r.e(4699),r.e(1323)]).then(r.bind(r,31323))));function P(){return(0,a.createElement)("span",null,(0,C.__)("Error when loading. Please refresh.","it-l10n-ithemes-security-pro"))}const B=(0,A.iv)({name:"1nml846",styles:"input{min-height:0;}input:focus{box-shadow:none;}"});function R(){const e=(0,Z.u)();return(0,a.useCallback)((t=>({...t,colors:{...t.colors,primary:e.colors.primary.base,primary75:e.colors.secondary.base,primary50:e.colors.tertiary.base,primary25:e.colors.surface.secondary}})),[e])}function U(){return(0,a.useMemo)((()=>({control:(e,t)=>({...e,minHeight:36,borderColor:t.isFocused?e.borderColor:"rgb(148, 148, 148)",borderRadius:2}),dropdownIndicator:e=>({...e,padding:6}),clearIndicator:e=>({...e,padding:6}),loadingIndicator:e=>({...e,padding:6}),valueContainer:e=>({...e,paddingTop:0,paddingBottom:0}),input:e=>({...e,paddingTop:0,paddingBottom:0})})),[])}function H({addErrorBoundary:e=!0,className:t,...r}){const n=R(),l=U(),s=(0,a.createElement)(T.Suspense,{fallback:(0,a.createElement)(c.Spinner,null)},(0,a.createElement)(F,(0,E.Z)({},r,{className:(0,A.cx)(t,B),theme:n,styles:l})));return e?(0,a.createElement)(j.ErrorBoundary,{FallbackComponent:P},s):s}function V({addErrorBoundary:e=!0,className:t,...r}){const n=R(),l=U(),s=(0,a.createElement)(T.Suspense,{fallback:(0,a.createElement)(c.Spinner,null)},(0,a.createElement)(M,(0,E.Z)({},r,{className:(0,A.cx)(t,B),theme:n,styles:l})));return e?(0,a.createElement)(j.ErrorBoundary,{FallbackComponent:P},s):s}function q({addErrorBoundary:e=!0,className:t,...r}){const n=R(),l=U(),s=(0,a.createElement)(T.Suspense,{fallback:(0,a.createElement)(c.Spinner,null)},(0,a.createElement)(z,(0,E.Z)({},r,{className:(0,A.cx)(t,B),theme:n,styles:l})));return e?(0,a.createElement)(j.ErrorBoundary,{FallbackComponent:P},s):s}var W=r(32010),K=r(60976);const $=(0,b.Z)(p.Tg,{target:"ewfm7an3"})({name:"1x94tvs",styles:"display:flex;align-items:center;flex-shrink:0;padding:.5rem 1.5rem;min-height:calc(30px + 1rem);& .components-button:focus{box-shadow:none;}"}),Y=(0,b.Z)(c.Toolbar,{target:"ewfm7an2"})({name:"gxzf6f",styles:"border:none;max-width:100%;margin-left:auto"}),G=(0,b.Z)("div",{target:"ewfm7an1"})({name:"hlx1h5",styles:"display:flex;gap:0.5rem;margin:0 2rem 0 1rem;flex-grow:1"}),X=(0,b.Z)(K.Ae,{target:"ewfm7an0"})({name:"1jxlbx4",styles:"height:2rem;width:2rem"});function Q({area:e,...t}){return(0,a.createElement)(c.Slot,(0,E.Z)({name:`Toolbar${e}`},t))}function J({area:e="actions",...t}){return(0,a.createElement)(c.Fill,(0,E.Z)({name:`Toolbar${e}`},t))}function ee(){const e=(0,h.bv)("dashboard"),t=(0,d.useViewportMatch)("medium","<");return(0,a.createElement)($,{role:"region","aria-label":(0,C.__)("Toolbar","it-l10n-ithemes-security-pro")},t?(0,a.createElement)(X,null):(0,a.createElement)(pe,null),(0,a.createElement)(Q,{area:"main"},(e=>(0,a.createElement)(G,null,e))),(0,a.createElement)(Y,{label:(0,C.__)("Toolbar Actions","it-l10n-ithemes-security-pro")},(0,a.createElement)(c.ToolbarButton,{icon:W.Z,href:e,text:(0,C.__)("Dashboard","it-l10n-ithemes-security-pro")}),(0,a.createElement)(Q,{area:"actions"})))}const te=(0,b.Z)("nav",{target:"edhe72i2"})("display:flex;border-bottom:1px solid ",(({theme:e})=>e.colors.border.normal),";"),re=(0,b.Z)(v.OL,{target:"edhe72i1"})("display:flex;text-decoration:none;align-items:center;&.active{box-shadow:inset 0 -4px 0 0 ",(({theme:e})=>e.colors.border.info),";}&:focus{color:",(({theme:e})=>e.colors.text.dark),";box-shadow:inset 0 0 0 2px ",(({theme:e})=>e.colors.border.info),",inset 0 -4px 0 0 ",(({theme:e})=>e.colors.border.info),"!important;border-radius:3px!important;}"),ae=(0,b.Z)(p.xv,{target:"edhe72i0"})({name:"1i2l0vb",styles:"padding:.75rem 1.25rem"}),ne=(0,a.createContext)({size:p.yH.LARGE});function le({className:e,size:t=p.yH.LARGE,children:r}){const n=(0,a.useMemo)((()=>({size:t})),[t]);return(0,a.createElement)(te,{className:e},(0,a.createElement)(ne.Provider,{value:n},r))}function se({title:e,...t}){const{size:r}=(0,a.useContext)(ne);return(0,a.createElement)(re,t,(0,a.createElement)(ae,{size:r,weight:p.fs.HEAVY,text:e,align:"center"}))}const ie=(0,b.Z)(K.Ae,{shouldForwardProp:e=>"isSmall"!==e,target:"ec6rts80"})("height:",(({isSmall:e})=>e?"56px":"120px"),";width:",(({isSmall:e})=>e?"56px":"120px"),";");function oe({icon:e,isSmall:t=!1}){return(0,d.useMediaQuery)("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)")?e:(0,a.createElement)(ie,{isSmall:t})}var ce=r(48015),de=r(31600);const ue=(0,b.Z)(K.sX,{target:"es1l7u91"})("height:",(({size:e})=>e),"px;width:auto;max-width:100%;"),me=(0,b.Z)(K.Pb,{target:"es1l7u90"})("height:",(({size:e})=>e),"px;width:auto;max-width:100%;");function pe({size:e=25,className:t}){const{installType:r}=(0,ce.useSelect)((e=>({installType:e(de.coreStore).getInstallType()})),[]);return"free"===r?(0,a.createElement)(ue,{size:e,className:t}):(0,a.createElement)(me,{size:e,className:t})}var he=r(59588),ge=r.n(he),be=r(76292),fe=r.n(be),ye=r(82506),Ee=r(82521);const xe=(0,b.Z)("div",{target:"e1pwp6dm1"})({name:"aj6rbz",styles:"display:flex;gap:0.5rem"}),ve=(0,b.Z)(p.zx,{target:"e1pwp6dm0"})({name:"1o3nkn",styles:"margin-left:auto"}),_e=ge()((()=>[{value:"24-hours",label:(0,C.__)("24 Hours","it-l10n-ithemes-security-pro")},{value:"week",label:(0,C.__)("7 Days","it-l10n-ithemes-security-pro")},{value:"30-days",label:(0,C.__)("30 Days","it-l10n-ithemes-security-pro")},{value:"custom",label:(0,C.__)("Custom","it-l10n-ithemes-security-pro")}]));function Ce({value:e,onChange:t}){const[r,n]=(0,a.useState)(!1),[s,i]=(0,a.useState)(void 0),[o,d]=(0,a.useState)(void 0);let[u,m]=(0,a.useState)(void 0);const h=e,g=function(e){if(!e)return"";const t=new window.Date;let r,a;switch(e){case"24-hours":return(0,C.__)("24 Hours","it-l10n-ithemes-security-pro");case"30-days":r=(0,Ee.dateI18n)("M j",t.setDate(t.getDate()-30)),a=(0,Ee.dateI18n)("M j, Y");break;case"week":r=(0,Ee.dateI18n)("M j",t.setDate(t.getDate()-7)),a=(0,Ee.dateI18n)("M j, Y");break;default:r=(0,Ee.dateI18n)("M j",e.start),a=(0,Ee.dateI18n)("M j, Y",e.end)}return(0,C.sprintf)((0,C.__)("%1$s - %2$s","it-l10n-ithemes-security-pro"),r,a)}(h);return u=u||((0,l.isString)(h)?h:"custom"),(0,a.createElement)("div",null,(0,a.createElement)(p.zx,{onClick:()=>n(!r),title:g,"aria-expanded":r,"aria-label":(0,C.sprintf)((0,C.__)("%s (click to edit)","it-l10n-ithemes-security-pro"),g),variant:"tertiary",text:g,icon:ye.Z,iconPosition:"right"}),r&&(0,a.createElement)(c.Modal,{title:(0,C.__)("Change Date Period","it-l10n-ithemes-security-pro"),onRequestClose:()=>n(!1)},(0,a.createElement)(c.SelectControl,{options:_e(),value:u,onChange:e=>m(e)}),(0,a.createElement)(xe,null,"custom"===u&&(0,a.createElement)(React.Fragment,null,(0,a.createElement)(c.Dropdown,{renderToggle:({isOpen:e,onToggle:t})=>(0,a.createElement)(p.zx,{variant:"secondary",onClick:t,"aria-expanded":e,"aria-label":(0,C.sprintf)((0,C.__)("From: %s (click to edit","it-l10n-ithemes-security-pro"),(0,Ee.dateI18n)("M j",s)),text:(0,C.sprintf)((0,C.__)("From %s","it-l10n-ithemes-security-pro"),(0,Ee.dateI18n)("M j",s))}),renderContent:()=>(0,a.createElement)(c.DatePicker,{currentDate:s,onChange:i,isInvalidDate:e=>{if((0,Ee.isInTheFuture)(e))return!0;const t=new window.Date;return t.setDate(t.getDate()-60),e<t}})}),(0,a.createElement)(c.Dropdown,{renderToggle:({isOpen:e,onToggle:t})=>(0,a.createElement)(p.zx,{variant:"secondary",onClick:t,"aria-expanded":e,"aria-label":(0,C.sprintf)((0,C.__)("To: %s (click to edit","it-l10n-ithemes-security-pro"),(0,Ee.dateI18n)("M j",o)),text:(0,C.sprintf)((0,C.__)("To: %s (click to edit","it-l10n-ithemes-security-pro"),(0,Ee.dateI18n)("M j",o))}),renderContent:()=>(0,a.createElement)(c.DatePicker,{currentDate:o,onChange:d,isInvalidDate:e=>!!(0,Ee.isInTheFuture)(e)||(0,Ee.getDate)(s)>e})})),(0,a.createElement)(ve,{variant:"primary",onClick:e=>{let r;if(e.preventDefault(),"custom"===u){const e=fe()(s).set({hour:0,minute:0,second:0}),t=fe()(o).set({hour:23,minute:59,second:59});r={start:(0,Ee.format)("Y-m-d\\TH:i:s",e),end:(0,Ee.format)("Y-m-d\\TH:i:s",t)}}else r=u;t(r),n(!1)},text:(0,C.__)("Apply","it-l10n-ithemes-security-pro")}))))}function we({result:e,hasBorder:t,schemaError:r,errors:n}){return(0,a.createElement)(React.Fragment,null,(0,a.createElement)(g,{apiError:e?.error,schemaError:r,errors:n,hasBorder:t}),e?.success&&(0,a.createElement)(p.rN,{messages:e.success,type:"success",hasBorder:t}),e?.warning&&(0,a.createElement)(p.rN,{messages:e.warning,type:"warning",hasBorder:t}),e?.info&&(0,a.createElement)(p.rN,{messages:e.info,type:"info",hasBorder:t}))}const Ie=(0,b.Z)(c.Icon,{target:"ebvjfo71"})({name:"1svyz14",styles:"background-color:#438C56;border-radius:2rem"}),ke=(0,b.Z)(c.Icon,{target:"ebvjfo70"})({name:"x749hy",styles:"background-color:#E6505466;border-radius:2rem;height:0.813rem!important;width:0.813rem!important;padding:2px"});var Ne=r(28184),Le=r(65202),Oe=r(67527);function De(){const{versionActive:e,versionSettings:t,installType:r}=(0,ce.useSelect)((e=>({versionActive:e(de.modulesStore).isActive("version-management"),versionSettings:e(de.modulesStore).getSettings("version-management"),installType:e(de.coreStore).getInstallType()})),[]),n=e&&t.update_if_vulnerable,l="free"===r,s=n?(0,C.__)("Real-Time Updates Active","it-l10n-ithemes-security-pro"):(0,C.__)("Real-Time Updates Inactive","it-l10n-ithemes-security-pro"),i=l?(0,C.__)("Upgrade","it-l10n-ithemes-security-pro"):(0,C.__)("Enable “Auto Update If Fixes Vulnerability” in Version Management","it-l10n-ithemes-security-pro"),o=n?(0,a.createElement)(Ie,{icon:Ne.Z}):(0,a.createElement)(ke,{icon:Le.Z,style:{fill:"#8A2424"}});return(0,a.createElement)(p.Ct,{text:s,icon:o,iconColor:"#FFFFFF",tooltip:i})}function Se(){const{hasPatchstack:e,installType:t}=(0,ce.useSelect)((e=>({hasPatchstack:e(de.coreStore).hasPatchstack(),installType:e(de.coreStore).getInstallType()})),[]),r="free"===t,n=e?(0,C.__)("Virtual Patching Active","it-l10n-ithemes-security-pro"):(0,C.__)("Virtual Patching Inactive","it-l10n-ithemes-security-pro"),l=r?(0,C.__)("Upgrade","it-l10n-ithemes-security-pro"):null,s=e?Oe.Z:(0,a.createElement)(ke,{icon:Le.Z,style:{fill:"#8A2424"}});return(0,a.createElement)(p.Ct,{text:n,icon:s,iconColor:"#6817C5",tooltip:l})}},23283:(e,t,r)=>{"use strict";r.r(t);var a=r(6293),n=r(3571),l=r(95122),s=r(48015),i=r(5638),o=r(64893),c=r(96015),d=r(83904),u=r(71930),m=r(10906),p=r(92819),h=r(1528),g=r(60976),b=r(52117),f=r(28952),y=r.n(f);const E=(0,b.Z)(u.zx,{target:"etlee6110"})("&.components-button{background:",(({theme:e})=>e.colors.surface.primary),";border:1px solid ",(({theme:e})=>e.colors.border.input),";box-shadow:none;}&:active{background-color:",(({theme:e})=>e.colors.surface.tertiary),";}"),x=(0,b.Z)("div",{target:"etlee619"})({name:"6p7o8o",styles:"display:flex;flex-grow:1;align-items:center;gap:0.5rem"}),v=(0,b.Z)("div",{target:"etlee618"})({name:"1v38uti",styles:"display:flex;align-items:center;&>*{display:flex;margin-left:-1.5em;transition:all 300ms ease;&:first-child{margin-left:0;}&:hover{margin-right:.5em;}&:last-child:hover{margin-right:0;}&:hover+*{margin-left:0;}}"}),_=(0,b.Z)("span",{target:"etlee617"})({name:"jtvuzj",styles:"display:flex;align-items:center;justify-content:center;width:2.25rem;height:2.25rem"}),C=(0,b.Z)(_,{target:"etlee616"})("color:",(({theme:e,backgroundColor:t})=>"light"===y()(t)?e.colors.text.dark:e.colors.text.white),";background-color:",(({backgroundColor:e})=>e),";border-radius:50%;"),w=(0,b.Z)("span",{target:"etlee615"})({name:"rkiwex",styles:"font-size:1rem"}),I=(0,b.Z)("img",{target:"etlee614"})({name:"8477rn",styles:"height:2.25rem;width:2.25rem;border-radius:50%"}),k=(0,b.Z)(u.zx,{target:"etlee613"})({name:"18c1yyk",styles:"padding:0;&:hover{box-shadow:none!important;}"}),N=(0,b.Z)("div",{target:"etlee612"})("width:",(({isExpanded:e})=>e?"100%":"200px"),";display:flex;flex-direction:column;gap:0.5rem;"),L=(0,b.Z)("header",{target:"etlee611"})({name:"a0377c",styles:"display:flex;align-items:center;gap:0.75rem"}),O=(0,b.Z)("footer",{target:"etlee610"})({name:"2qga7i",styles:"text-align:right"}),D=(0,a.forwardRef)((function({avatar:e,label:t,slug:r},n){if(e)return(0,a.createElement)(_,{ref:n},(0,a.createElement)(I,{src:e,alt:""}));if(t){const e=g.l6[(e=>{let t=0;for(let r=0;r<e.length;r++)t+=e.charCodeAt(r);return t})(r)%g.l6.length],l=t.split(" "),s=1===l.length?t.substring(0,2):l[0].substring(0,1).toUpperCase()+l[1].substring(0,1).toUpperCase();return(0,a.createElement)(C,{backgroundColor:e,ref:n},(0,a.createElement)(w,null,s))}return null}));function S({dashboardId:e}){const{dashboard:t}=(0,s.useSelect)((t=>({dashboard:t("ithemes-security/dashboard").getDashboardForEdit(e)})),[e]),r=(0,p.get)(t,["_embedded","author",0]);return r?(0,a.createElement)(o.Tooltip,{text:r.name},(0,a.createElement)(D,{avatar:(0,h.getAvatarUrl)(r)})):null}var T=r(14776),j=r(9576),Z=r(59588),A=r.n(Z),F=r(87514),M=r.n(F),z=r(73470),P=r(1986);const B=(0,b.Z)("form",{target:"e1m8toyd8"})("width:",(({isExpanded:e})=>e?"100%":"300px"),";padding:0.25rem 0.75rem;display:flex;flex-direction:column;gap:0.5rem;"),R=(0,b.Z)("header",{target:"e1m8toyd7"})({name:"p5tmle",styles:"display:flex;flex-direction:column;gap:0.5rem"}),U=(0,b.Z)("section",{target:"e1m8toyd6"})({name:"vhphzh",styles:"display:flex;flex-direction:column;gap:0.5rem;margin-top:0.75rem"}),H=(0,b.Z)("footer",{target:"e1m8toyd5"})("display:flex;justify-content:space-between;align-items:center;border-top:1px solid ",(({theme:e})=>e.colors.border.normal),";margin-top:1.5rem;padding-top:1.5rem;"),V=(0,b.Z)(u.zx,{target:"e1m8toyd4"})({name:"1o3nkn",styles:"margin-left:auto"}),q=(0,b.Z)("div",{target:"e1m8toyd3"})({name:"26en7y",styles:"display:flex;gap:0.5rem;align-items:center"}),W=(0,b.Z)(P.qb,{target:"e1m8toyd2"})({name:"xer59f",styles:"flex-grow:1;input:focus{box-shadow:none;}"}),K=(0,b.Z)("section",{target:"e1m8toyd1"})({name:"p2oy12",styles:"display:flex;flex-direction:column;gap:0.25rem"}),$=(0,b.Z)(u.xv,{target:"e1m8toyd0"})({name:"49aokf",styles:"display:contents"}),Y=A()(((e=[])=>t=>new Promise(((r,a)=>{M()({path:(0,z.addQueryArgs)("/wp/v2/users",{search:t,per_page:100,exclude:e})}).then((e=>r(e.map((e=>({value:e.id,label:e.name,user:e})))))).catch(a)})))),G=A()(((e=[])=>[].concat(...e.map((e=>e.users||[])))));function X({dashboardId:e,share:t={type:"user",users:[]},onChange:r}){const{suggested:n,dashboard:i}=(0,s.useSelect)((t=>({suggested:t("ithemes-security/dashboard").getSuggestedShareUsers(),dashboard:t("ithemes-security/dashboard").getDashboardForEdit(e)})),[e]),c=G(i.sharing).concat(i.created_by),d=n.filter((e=>!c.includes(e.id)));return(0,a.createElement)(U,null,d.length>0&&(0,a.createElement)(K,{as:"fieldset"},(0,a.createElement)($,{as:"legend",text:(0,l.__)("Suggested Users","it-l10n-ithemes-security-pro")}),(0,a.createElement)(u.aV,null,d.map((e=>(0,a.createElement)(u.HC,{key:e.id},(0,a.createElement)(o.CheckboxControl,{__nextHasNoMarginBottom:!0,label:e.name,checked:t.users.includes(e.id),onChange:a=>r(a?{...t,users:[...t.users,e.id]}:{...t,users:t.users.filter((t=>t!==e.id))})})))))),(0,a.createElement)(Q,{share:t,onChange:r,suggested:n,exclude:c}))}function Q({share:e,onChange:t,suggested:r,exclude:n}){const{receiveUser:i}=(0,s.useDispatch)("ithemes-security/dashboard"),[o,c]=(0,a.useState)(void 0),[d,m]=(0,a.useState)(""),p=e.users.filter((e=>!r.some((t=>t.id===e))));return(0,a.createElement)(K,null,(0,a.createElement)(u.X6,{level:4,size:u.yH.NORMAL,text:(0,l.__)("All Users","it-l10n-ithemes-security-pro")}),p.length>0&&(0,a.createElement)(u.aV,null,p.map((e=>(0,a.createElement)(J,{key:e,userId:e})))),(0,a.createElement)(u.xv,{as:"label",htmlFor:"itsec-share-dashboard__add-users-select",text:(0,l.__)("Select a User","it-l10n-ithemes-security-pro")}),(0,a.createElement)(q,null,(0,a.createElement)(W,{className:"itsec-share-dashboard__add-users-select-dropdown",inputId:"itsec-share-dashboard__add-users-select",cacheOptions:!0,defaultOptions:!0,loadOptions:Y(n),value:o,onChange:e=>c(e),inputValue:d,onInputChange:e=>m(e),maxMenuHeight:150,menuPlacement:"top"}),(0,a.createElement)(u.zx,{onClick:r=>{r.preventDefault(),o&&(i(o.user),t({...e,users:[...e.users,o.value]}),c(!1),m(""))},disabled:!o,text:(0,l.__)("Select","it-l10n-ithemes-security-pro"),variant:"tertiary"})))}function J({userId:e}){const{user:t}=(0,s.useSelect)((t=>({user:t("ithemes-security/dashboard").getUser(e)})),[e]);return(0,a.createElement)(u.HC,{text:t.name})}const ee=A()(((e,t)=>e.some((e=>"role"===e.type&&e.roles.includes(t)))));function te({dashboardId:e,share:t={type:"role",roles:[]},onChange:r}){const{dashboard:n,roles:i}=(0,s.useSelect)((t=>({dashboard:t("ithemes-security/dashboard").getDashboardForEdit(e),roles:t("ithemes-security/core").getRoles()})),[e]),c=(0,p.pickBy)(i,((e,t)=>!ee(n.sharing,t))),d=!(0,p.isEmpty)(c);return(0,a.createElement)(U,null,!d&&(0,a.createElement)(u.xv,{text:(0,l.__)("All roles already selected.","it-l10n-ithemes-security-pro"),variant:u.rK.MUTED}),d&&(0,a.createElement)(u.aV,null,(0,p.map)(c,((e,n)=>(0,a.createElement)(u.HC,{key:n},(0,a.createElement)(o.CheckboxControl,{__nextHasNoMarginBottom:!0,label:e.label,checked:t.roles.includes(n),onChange:e=>r(e?{...t,roles:[...t.roles,n]}:{...t,roles:t.roles.filter((e=>n!==e))})}))))))}const re=(0,p.once)((()=>[{name:"user",title:(0,l.__)("Users","it-l10n-ithemes-security-pro"),Component:X,type:"button",count:e=>(0,l.sprintf)((0,l._n)("%d user","%d users",e.users.length,"it-l10n-ithemes-security-pro"),e.users.length)},{name:"role",title:(0,l.__)("Roles","it-l10n-ithemes-security-pro"),type:"button",Component:te,count:e=>(0,l.sprintf)((0,l._n)("%d role","%d roles",e.roles.length,"it-l10n-ithemes-security-pro"),e.roles.length)}]));function ae({dashboardId:e,close:t}){const r=(0,j.useViewportMatch)("medium","<"),[n,i]=(0,a.useState)({}),{isSaving:o,dashboard:c}=(0,s.useSelect)((t=>({isSaving:t("ithemes-security/dashboard").isSavingDashboard(e),dashboard:t("ithemes-security/dashboard").getDashboardForEdit(e)})),[e]),{saveDashboard:d}=(0,s.useDispatch)("ithemes-security/dashboard"),m=async e=>{e.preventDefault(),o||(await d({...c,sharing:[...c.sharing,...Object.values(n).filter((e=>e))]}),i({}),t())},h=re(),g=h.reduce(((e,t)=>(n[t.name]&&e.push(t.count(n[t.name])),e)),[]);return(0,a.createElement)(B,{onSubmit:m,isExpanded:r},(0,a.createElement)(R,null,!r&&(0,a.createElement)(u.X6,{level:3,size:u.yH.NORMAL,variant:u.rK.DARK,weight:u.fs.HEAVY,text:(0,l.__)("Share Dashboard","it-l10n-ithemes-security-pro")}),(0,a.createElement)(u.xv,{as:"p",text:(0,l.__)("Give select users read-only access to this dashboard. Great for building client portals.","it-l10n-ithemes-security-pro"),size:u.yH.SMALL,variant:u.rK.MUTED})),(0,a.createElement)(u.x4,{tabs:h},(({name:t,Component:r=p.noop})=>(0,a.createElement)(r,{dashboardId:e,share:n[t],onChange:e=>i({...n,[t]:e})}))),(0,a.createElement)(H,null,g.length>0&&(0,a.createElement)(u.xv,{variant:u.rK.MUTED,text:(0,l.sprintf)((0,l.__)("%s selected","it-l10n-ithemes-security-pro"),g.join(", "))}),(0,a.createElement)(V,{variant:"primary",type:"submit",onClick:m,isBusy:o,disabled:o||(0,p.isEmpty)(n),text:(0,l.__)("Share","it-l10n-ithemes-security-pro")})))}function ne({dashboardId:e,userId:t,user:r}){const n=(0,j.useViewportMatch)("medium","<"),{dashboard:i}=(0,s.useSelect)((t=>({dashboard:t("ithemes-security/dashboard").getDashboardForEdit(e)})),[e]),{saveDashboard:c}=(0,s.useDispatch)("ithemes-security/dashboard"),d=()=>{const e=[];for(const r of i.sharing)if("user"!==r.type)e.push(r);else if(r.users.includes(t)){const a={...r,users:r.users.filter((e=>e!==t))};e.push(a)}else e.push(r);c({...i,sharing:e})},m=r?r.name:(0,l.sprintf)((0,l.__)("User #%d","it-l10n-ithemes-security-pro"),t),p=(0,h.getAvatarUrl)(r);return(0,a.createElement)(o.Dropdown,{headerTitle:(0,l.sprintf)((0,l.__)("Share Settings for %s","it-l10n-ithemes-security-pro"),m),focusOnMount:"container",expandOnMobile:!0,renderToggle:({isOpen:e,onToggle:t})=>(0,a.createElement)(o.Tooltip,{text:m},(0,a.createElement)(k,{"aria-pressed":e,"aria-label":m,onClick:t,variant:""},(0,a.createElement)(D,{avatar:p}))),renderContent:()=>(0,a.createElement)(N,{isExpanded:n},(0,a.createElement)(L,null,(0,a.createElement)(I,{src:p,alt:""}),(0,a.createElement)(u.X6,{level:3,size:u.yH.LARGE,variant:u.rK.DARK,weight:u.fs.HEAVY,text:m})),(0,a.createElement)(O,null,(0,a.createElement)(u.zx,{variant:"tertiary",onClick:d,text:(0,l.__)("Remove","it-l10n-ithemes-security-pro")})))})}function le({dashboardId:e,role:t}){const r=(0,j.useViewportMatch)("medium","<"),{dashboard:n,roles:i}=(0,s.useSelect)((t=>({dashboard:t("ithemes-security/dashboard").getDashboardForEdit(e),roles:t("ithemes-security/core").getRoles()})),[e]),{saveDashboard:c}=(0,s.useDispatch)("ithemes-security/dashboard"),d=()=>{const e=[];for(const r of n.sharing)if("role"!==r.type)e.push(r);else if(r.roles.includes(t)){const a={...r,roles:r.roles.filter((e=>e!==t))};e.push(a)}else e.push(r);return c({...n,sharing:e})},m=(0,p.get)(i,[t,"label"],t);return(0,a.createElement)(o.Dropdown,{headerTitle:(0,l.sprintf)((0,l.__)("Share Settings for %s","it-l10n-ithemes-security-pro"),m),focusOnMount:"container",expandOnMobile:!0,renderToggle:({isOpen:e,onToggle:r})=>(0,a.createElement)(o.Tooltip,{text:m},(0,a.createElement)(k,{"aria-pressed":e,onClick:r,"aria-label":m,variant:""},(0,a.createElement)(D,{label:m,slug:t}))),renderContent:()=>(0,a.createElement)(N,{isExpanded:r},(0,a.createElement)(L,null,(0,a.createElement)(u.X6,{level:3,variant:u.rK.DARK,size:u.yH.LARGE,weight:u.fs.HEAVY,text:m})),(0,a.createElement)(O,null,(0,a.createElement)(u.zx,{variant:"tertiary",onClick:d,text:(0,l.__)("Remove","it-l10n-ithemes-security-pro")})))})}function se({dashboardId:e}){const{dashboard:t}=(0,s.useSelect)((t=>({dashboard:t("ithemes-security/dashboard").getDashboardForEdit(e)})),[e]);return(0,a.createElement)(x,null,(0,a.createElement)(o.Dropdown,{popoverProps:{position:"bottom right"},expandOnMobile:!0,focusOnMount:"container",headerTitle:(0,l.__)("Share with User","it-l10n-ithemes-security-pro"),renderToggle:({isOpen:e,onToggle:t})=>(0,a.createElement)(u.zx,{label:(0,l.__)("Share Dashboard","it-l10n-ithemes-security-pro"),"aria-pressed":e,onClick:t,icon:ie,variant:"tertiary"}),renderContent:({onClose:t})=>(0,a.createElement)(ae,{dashboardId:e,close:t})}),(0,a.createElement)(v,null,(0,p.get)(t,"sharing",[]).filter((e=>"user"===e.type)).map((r=>r.users.map((n=>{return(0,a.createElement)(ne,{share:r,userId:n,user:(l=n,(0,p.find)((0,p.get)(t,["_embedded","ithemes-security:shared-with"],[]),{id:l})),dashboardId:e,key:n});var l})))),(0,p.get)(t,"sharing",[]).filter((e=>"role"===e.type)).map((t=>t.roles.map((r=>(0,a.createElement)(le,{share:t,role:r,dashboardId:e,key:r})))))))}const ie=(0,a.createElement)(T.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)(T.Path,{d:"M12 2.5L12 15.5M12 2.5L9 5.5M12 2.5L15 5.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,a.createElement)(T.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 9H7C5.89543 9 5 9.89543 5 11V18C5 19.1046 5.89543 20 7 20H17C18.1046 20 19 19.1046 19 18V11C19 9.89543 18.1046 9 17 9H15.5V10.5H17C17.2761 10.5 17.5 10.7239 17.5 11V18C17.5 18.2761 17.2761 18.5 17 18.5H7C6.72386 18.5 6.5 18.2761 6.5 18V11C6.5 10.7239 6.72386 10.5 7 10.5H8.5V9Z"}));var oe=r(82521),ce=r(29508);const de=(0,b.Z)("div",{target:"eijzkqk10"})("padding:0.25rem 0.75rem;width:",(({isExpanded:e})=>e?"100%":"300px"),";display:flex;flex-direction:column;gap:0.5rem;"),ue=(0,b.Z)("header",{target:"eijzkqk9"})({name:"p5tmle",styles:"display:flex;flex-direction:column;gap:0.5rem"}),me=(0,b.Z)("ul",{target:"eijzkqk8"})({name:"1chjzrs",styles:"display:flex;flex-direction:column;gap:0.5rem;margin:0"}),pe=(0,b.Z)("footer",{target:"eijzkqk7"})({name:"zjik7",styles:"display:flex"}),he=(0,b.Z)(u.zx,{target:"eijzkqk6"})("flex:1;background-color:",(({theme:e})=>e.colors.surface.secondary),"!important;"),ge=(0,ce.F4)({name:"1x91ro9",styles:"0%{opacity:.5;}25%{opacity:1;}60%{opacity:.5;}100%{opacity:.5;}"}),be=(0,b.Z)(u.Tg,{shouldForwardProp:e=>"isDeleting"!==e,target:"eijzkqk5"})("display:flex;flex-direction:column;gap:0.5rem;padding:0.75rem 0.5rem;margin:0;",(({isDeleting:e})=>e&&`animation: ${ge} 3s ease-out infinite normal;`),";"),fe=(0,b.Z)("header",{target:"eijzkqk4"})({name:"uq5ekw",styles:"display:flex;align-items:center;justify-content:flex-start;gap:0.75rem"}),ye=(0,b.Z)(u.zx,{target:"eijzkqk3"})("font-weight:",u.fs.HEAVY,";"),Ee=(0,b.Z)("section",{target:"eijzkqk2"})({name:"p2oy12",styles:"display:flex;flex-direction:column;gap:0.25rem"}),xe=(0,b.Z)("footer",{target:"eijzkqk1"})({name:"emb48o",styles:"display:flex;gap:0.5rem;justify-content:space-between"}),ve=(0,b.Z)(u.zx,{target:"eijzkqk0"})({name:"82a6rk",styles:"flex:1"});function _e({dashboard:e,currentUserId:t,close:r}){const{currentDashboard:n,isPrimary:o,isDeleting:c}=(0,s.useSelect)((t=>({currentDashboard:t("ithemes-security/dashboard").getViewingDashboardId(),isPrimary:t("ithemes-security/dashboard").getPrimaryDashboard()===e.id,isDeleting:t("ithemes-security/dashboard").isDeletingDashboard(e.id)})),[e.id]),{viewDashboard:d,setPrimaryDashboard:m,deleteDashboard:h}=(0,s.useDispatch)("ithemes-security/dashboard"),g=(0,i.decodeEntities)(e.label.rendered),b=e.id!==n&&!o&&t===e.created_by;return(0,a.createElement)(be,{as:"li",isDeleting:c,variant:u.h1.SECONDARY},(0,a.createElement)(fe,null,(0,a.createElement)(u.X6,{level:4,size:u.yH.NORMAL,weight:u.fs.HEAVY},n===e.id?g:(0,a.createElement)(ye,{variant:"link",onClick:()=>{d(e.id),r()},text:g})),o&&(0,a.createElement)(u.xv,{variant:u.rK.MUTED,weight:u.fs.HEAVY,text:(0,l.__)("• Primary","it-l10n-ithemes-security-pro")})),(0,a.createElement)(Ee,null,t!==e.created_by&&(0,a.createElement)(u.xv,{variant:u.rK.MUTED,text:(0,l.sprintf)((0,l.__)("Shared by %s","it-l10n-ithemes-security-pro"),(0,p.get)(e,["_embedded","author",0,"name"],(0,l.sprintf)((0,l.__)("User #%d","it-l10n-ithemes-security-pro"),e.created_by)))}),(0,a.createElement)(u.xv,{variant:u.rK.MUTED,text:(0,l.sprintf)((0,l.__)("Created on %s","it-l10n-ithemes-security-pro"),(0,oe.dateI18n)("M j, Y",e.created_at))})),(!o||b)&&(0,a.createElement)(xe,null,!o&&(0,a.createElement)(ve,{align:"center",variant:"tertiary",onClick:()=>m(e.id),text:(0,l.__)("Make Primary","it-l10n-ithemes-security-pro")}),b&&(0,a.createElement)(ve,{align:"center",variant:"tertiary",isDestructive:!0,onClick:()=>h(e.id),text:(0,l.__)("Delete","it-l10n-ithemes-security-pro")})))}function Ce({close:e}){const t=(0,j.useViewportMatch)("medium","<"),{currentUserId:r,canCreate:n,dashboards:i}=(0,s.useSelect)((e=>({canCreate:e("ithemes-security/dashboard").canCreateDashboards(),dashboards:e("ithemes-security/dashboard").getAvailableDashboards(),currentUserId:e("ithemes-security/core").getCurrentUser()?.id||0})),[]),{viewCreateDashboard:o}=(0,s.useDispatch)("ithemes-security/dashboard");return(0,a.createElement)(de,{isExpanded:t},(0,a.createElement)(ue,null,!t&&(0,a.createElement)(u.X6,{level:3,size:u.yH.NORMAL,variant:u.rK.DARK,weight:u.fs.HEAVY,text:(0,l.__)("Manage Dashboards","it-l10n-ithemes-security-pro")}),(0,a.createElement)(u.xv,{as:"p",size:u.yH.SMALL,variant:u.rK.MUTED,text:(0,l.__)("Switch, manage, or create new dashboards.","it-l10n-ithemes-security-pro")})),(0,a.createElement)(me,null,i.map((t=>(0,a.createElement)(_e,{key:t.id,dashboard:t,currentUserId:r,close:e})))),n&&(0,a.createElement)(pe,null,(0,a.createElement)(he,{variant:"tertiary",align:"center",onClick:()=>{o(),e()},text:(0,l.__)("Create New Dashboard","it-l10n-ithemes-security-pro")})))}function we(){const{canEdit:e,canCreate:t,dashboards:r,dashboard:n,dashboardId:p}=(0,s.useSelect)((e=>{const t=e("ithemes-security/dashboard").getViewingDashboardId();return{dashboardId:t,canEdit:t&&e("ithemes-security/dashboard").canEditDashboard(t),dashboard:t&&e("ithemes-security/dashboard").getDashboard(t),canCreate:e("ithemes-security/dashboard").canCreateDashboards(),dashboards:e("ithemes-security/dashboard").getAvailableDashboards()}}),[]),h=(0,a.createElement)(u.X6,{level:1,size:u.yH.NORMAL,weight:u.fs.NORMAL},n?(0,i.decodeEntities)(n.label.rendered):(0,l.__)("No Dashboard Selected","it-l10n-ithemes-security-pro"));return(0,a.createElement)(m.AdminBarFill,{type:"primary"},p&&(0,a.createElement)(S,{dashboardId:p}),(0,a.createElement)("div",null,!t&&r.length<=1&&p?h:(0,a.createElement)(o.Dropdown,{popoverProps:{position:"bottom right"},headerTitle:(0,l.__)("Manage Dashboards","it-l10n-ithemes-security-pro"),expandOnMobile:!0,focusOnMount:"container",renderToggle:({isOpen:e,onToggle:t})=>(0,a.createElement)(E,{"aria-expanded":e,onClick:t,text:h,icon:e?c.Z:d.Z,iconPosition:"right"}),renderContent:({onClose:e})=>(0,a.createElement)(Ce,{dashboardId:p,close:e})})),n&&e&&(0,a.createElement)(se,{dashboardId:p}))}function Ie(){return(0,a.createElement)(React.Fragment,null,(0,a.createElement)(we,null))}r.p=window.itsecWebpackPublicPath,(0,l.setLocaleData)({"":{}},"it-l10n-ithemes-security-pro"),(0,n.registerPlugin)("itsec-pro-dashboard",{render:()=>(0,a.createElement)(Ie,null)})},83904:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r(6293),n=r(14776);const l=(0,a.createElement)(n.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)(n.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"}))},96015:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r(6293),n=r(14776);const l=(0,a.createElement)(n.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,a.createElement)(n.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"}))},28952:(e,t,r)=>{var a=r(86189);e.exports=function(e){var t=a(e);return Math.round((299*parseInt(t[0])+587*parseInt(t[1])+114*parseInt(t[2]))/1e3)<=180?"dark":"light"}},86189:e=>{e.exports=function(e){e.charAt&&"#"===e.charAt(0)&&(e=function(e){var t=e.split("");return t.shift(),t.join("")}(e)),3===e.length&&(e=function(e){return e.split("").reduce((function(e,t){return e.concat([t,t])}),[]).join("")}(e));var t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]}},10906:e=>{e.exports=function(){return this.itsec.dashboard.api}()},1528:e=>{e.exports=function(){return this.itsec.dashboard.dashboard}()},31600:e=>{e.exports=function(){return this.itsec.packages.data}()},82839:e=>{e.exports=function(){return this.wp.a11y}()},87514:e=>{e.exports=function(){return this.wp.apiFetch}()},64893:e=>{e.exports=function(){return this.wp.components}()},9576:e=>{e.exports=function(){return this.wp.compose}()},48015:e=>{e.exports=function(){return this.wp.data}()},82521:e=>{e.exports=function(){return this.wp.date}()},6293:e=>{e.exports=function(){return this.wp.element}()},5638:e=>{e.exports=function(){return this.wp.htmlEntities}()},95122:e=>{e.exports=function(){return this.wp.i18n}()},81834:e=>{e.exports=function(){return this.wp.isShallowEqual}()},81019:e=>{e.exports=function(){return this.wp.keycodes}()},3571:e=>{e.exports=function(){return this.wp.plugins}()},14776:e=>{e.exports=function(){return this.wp.primitives}()},73470:e=>{e.exports=function(){return this.wp.url}()},99196:e=>{"use strict";e.exports=window.React},91850:e=>{"use strict";e.exports=window.ReactDOM},92819:e=>{"use strict";e.exports=window.lodash},76292:e=>{"use strict";e.exports=window.moment}},e=>{e.O(0,[7271,1930,5307,9443,135,1511,976,6179],(()=>(23283,e(e.s=23283))));var t=e.O();((window.itsec=window.itsec||{})["pro-dashboard"]=window.itsec["pro-dashboard"]||{}).dashboard=t}]);